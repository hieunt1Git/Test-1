# 2. Ladi - data base

## Tổng quan

Kết nối theo kiểu webhook thông qua một app trên lark được tạo ra trên [open.larksuite.com/app](https://open.larksuite.com/app) nó sẽ kết nỗi đến lark và lấy thông tin từ ladipage vê lark base.

## Set Up

Thông tin setup từ ladipage (Cách set Up): [**Link info set up get data from LDP to Lark Base** ](https://ladipage-vietnam.gitbook.io/v5-ladipage/xvii.-form-data/cac-buoc-cai-dat-luu-data/luu-data-ve-lark-base)**\*\*\* toàn bộ trong link này\*\*\***

<figure><img src="../.gitbook/assets/image (37).png" alt=""><figcaption></figcaption></figure>

Hiện tại tất cả các thông tin trên ladipage được set up về các base trong thư mục. [Thư mục chứa các base lấy thông tin từ ladipage](https://cnvloyalty.larksuite.com/drive/folder/FIaBfdsb9l639AdvYObuLGX1shh?from=from_copylink)Trong thư mục tập hợp toàn bộ các dữ liệu lead khách hàng từ các nguồn khác nhau bao gồm ladipage và thealita,....

## Các bước kết nối với tài khoản Ladi vs Lark.

{% stepper %}
{% step %}
## **Tạo tài khoản liên kết.**

**Cách 1 : Tạo tài khoản liên kết từ mục Cài đặt**

Truy cập trang [builder.ladipage.com](http://builder.ladipage.com/), chọn menu **Cài đặt -> Tích hợp-> Tài khoản liên kết**. Sau đó lựa chọn Loại tài khoản là **Lark Base**

<figure><img src="../.gitbook/assets/image (41).png" alt=""><figcaption></figcaption></figure>

**Cách 2 : Tạo tài khoản liên kết từ mục Landing Pages -> Cấu hình form**

Truy cập trang [builder.ladipage.com](http://builder.ladipage.com/), chọn menu **Landing Pages -> Cấu hình form-> Tạo cấu hình form -> Form data -> Tạo tài khoản liên kết .**&#x53;au đó lựa chọn Loại tài khoản là **Lark Base**

<figure><img src="../.gitbook/assets/image (42).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../.gitbook/assets/image (43).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../.gitbook/assets/image (44).png" alt=""><figcaption></figcaption></figure>

**Cách 3 :** Truy cập builder chỉnh sửa trang landingpage muốn lưu data về **Lark Base**, ở phần **Form đăng ký --> mục Lưu data--> bấm Thêm mới ---> chọn Tạo liên kết ->Loại tài khoản là Lark Base**

<figure><img src="https://ladipage-vietnam.gitbook.io/v5-ladipage/~gitbook/image?url=https%3A%2F%2F3336777906-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-x-prod.appspot.com%2Fo%2Fspaces%252FaiAPp1ii3U3gXdxFLih2%252Fuploads%252FAzNpRDN7Xin1YZpQ3J0C%252Fimage.png%3Falt%3Dmedia%26token%3De522e7cb-90fe-4923-9d56-8389b7689519&#x26;width=768&#x26;dpr=4&#x26;quality=100&#x26;sign=1793ee37&#x26;sv=2" alt=""><figcaption></figcaption></figure>
{% endstep %}

{% step %}
## Nhập đầy đủ các thông tin:

**Tên Liên kết:** là tên để phân biệt với các liên kết khác.

**App ID, App Secret.** là các thông tin kết nối láy trong tài khoản Larkbase

Ấn **Thêm tài khoản** để Lưu.<br>

<figure><img src="../.gitbook/assets/image (45).png" alt=""><figcaption></figcaption></figure>

**\*Cách lấy các thông tin kết nối bên** [**Lark Base**](https://ladipage-vietnam.gitbook.io/v5-ladipage/xvii.-form-data/cac-buoc-cai-dat-luu-data/luu-data-ve-lark-base/cach-tao-app-va-lay-cac-thong-tin-ket-noi-cua-lark-base)
{% endstep %}

{% step %}
## **Tạo** cấu hình lưu trữ form.

Vào lại trang builder.ladipage.com, chọn menu **Landing Pages -> Cấu hình Form -> Tạo cấu hình form.** Bấm nút **Chọn** để sử dụng tài khoản liên kết bạn muốn dùng

<figure><img src="https://ladipage-vietnam.gitbook.io/v5-ladipage/~gitbook/image?url=https%3A%2F%2F3336777906-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-x-prod.appspot.com%2Fo%2Fspaces%252FaiAPp1ii3U3gXdxFLih2%252Fuploads%252FnvdsfXlVsO3cyoBh1gsr%252Fc%25E1%25BA%25A5u%2520h%25C3%25ACnh%2520form.gif%3Falt%3Dmedia%26token%3D1f9dbf47-0a68-4d08-a238-a2f7dfd9a24d&#x26;width=768&#x26;dpr=4&#x26;quality=100&#x26;sign=5363c739&#x26;sv=2" alt=""><figcaption></figcaption></figure>



**Kết nối các thông tin:**

**Nhập thông tin App Token** lấy trong tài khoản Larkbase và bấm **Kết nối**

**Chọn Table (Bảng dữ liệu) muốn dữ liệu đồng bộ sang bên Lark Base**

* **Tên lưu trữ**: là tên gợi nhắc cho cấu hình form này.
* **Table:** Bạn chọn bảng tính bạn muốn lưu trữ dữ liệu về bên Lark Base
* **Đồng bộ các trường thông tin:**

Bên tay trái là các trường thông tin bạn đã tạo trên form ở landing page, bạn cần lấy Tên Lấy Dữ Liệu của các trường của LadiPage như bên dưới:<br>

<figure><img src="https://ladipage-vietnam.gitbook.io/v5-ladipage/~gitbook/image?url=https%3A%2F%2Fcontent.gitbook.com%2Fcontent%2FaiAPp1ii3U3gXdxFLih2%2Fblobs%2FklfMxfFOqlAC3p9qYKrB%2Ft%25C3%25AAn%2520l%25E1%25BA%25A5y%2520d%25E1%25BB%25AF%2520li%25E1%25BB%2587u.png&#x26;width=768&#x26;dpr=4&#x26;quality=100&#x26;sign=a565c9f5&#x26;sv=2" alt=""><figcaption></figcaption></figure>

Bên phải là các trường thông tin bạn tạo trên **Lark Base**

<figure><img src="../.gitbook/assets/image (46).png" alt=""><figcaption></figcaption></figure>

Bạn có thể chọn **thêm tài khoản liên kết** khác cho Cấu hình này. Mỗi cấu hình được chứa tối đa 3 tài khoản liên kết, tương đương với 3 nguồn lưu trữ thông tin khách hàng đồng thời nhận được từ form đăng ký trên Landing Page.
{% endstep %}

{% step %}
## **Thiết lập Lưu data cho form**

Quay trở lại form trên trang Landing Page, chọn toàn form bạn đang muốn cài đặt và chọn **"Lưu data":**

<figure><img src="https://ladipage-vietnam.gitbook.io/v5-ladipage/~gitbook/image?url=https%3A%2F%2Fcontent.gitbook.com%2Fcontent%2FaiAPp1ii3U3gXdxFLih2%2Fblobs%2FRkOdpRqmFVNFYqPw8RRi%2Fimage.png&#x26;width=768&#x26;dpr=4&#x26;quality=100&#x26;sign=74a77da3&#x26;sv=2" alt=""><figcaption></figcaption></figure>
{% endstep %}

{% step %}
## **Sử dụng cấu hình form** <a href="#buoc-5-su-dung-cau-hinh-form" id="buoc-5-su-dung-cau-hinh-form"></a>

Chọn cấu hình phù hợp trong danh sách cấu hình form đã được cài đặt ở bước 3, sau đó bấm **Cập nhật** để hoàn thành.
{% endstep %}
{% endstepper %}



## Cách tạo app và lấy các thông tin kết nối của Lark Base

{% stepper %}
{% step %}
Truy cập [Lark Developer](https://open.larksuite.com/) và chọn Create Custom App

<figure><img src="../.gitbook/assets/image (47).png" alt=""><figcaption></figcaption></figure>
{% endstep %}

{% step %}
Nhập Name, Description và Icon cho App sau đó bấm Create để tạo

<figure><img src="../.gitbook/assets/image (48).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../.gitbook/assets/image (49).png" alt=""><figcaption></figcaption></figure>
{% endstep %}

{% step %}
Tại mục Credentials & Basic Info lưu lại thông tin **App ID và App Secret**

<figure><img src="../.gitbook/assets/image (50).png" alt=""><figcaption></figcaption></figure>
{% endstep %}

{% step %}
Truy cập mục Permissions & Scopes để cấp quyền cho App
{% endstep %}

{% step %}
Tại mục API Scopes / Manage scopes chọn Docs và chọn Scope name: - View, comment, edit and manage Base (bitable:app) - View, comment, and export Base (bitable:app:readonly) sau đó bấm chọn **Add in Bulk.**

<figure><img src="../.gitbook/assets/image (51).png" alt=""><figcaption></figcaption></figure>


{% endstep %}

{% step %}
Chọn Confirm and go to create app version để xác nhận và gửi yêu cầu publish app.

<figure><img src="../.gitbook/assets/image (52).png" alt=""><figcaption></figcaption></figure>
{% endstep %}

{% step %}
Nhập thông tin phiên bản app (App version / Update Notes) và bấm Save để gửi yêu cầu review app. Bấm **Submit for release**

<figure><img src="../.gitbook/assets/image (53).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../.gitbook/assets/image (54).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../.gitbook/assets/image (55).png" alt=""><figcaption></figcaption></figure>
{% endstep %}

{% step %}
Truy cập [Lark Admin](https://www.larksuite.com/admin) và chọn mục Workplace / App Review để tiến hành duyệt app.
{% endstep %}

{% step %}
Chọn App cần duyệt và bấm Approve để duyệt app.

<figure><img src="../.gitbook/assets/image (56).png" alt=""><figcaption></figcaption></figure>
{% endstep %}
{% endstepper %}

{% hint style="info" %}
Trong trường hợp bạn không kết nối được larkbase, bạn kiểm tra phần Bật quyền nâng cao để cấu hình thêm quyền cụ thể hay không. Quyền này phải ở chế độ Tắt thì bạn mới kết nối được&#x20;

![](<../.gitbook/assets/image (58).png>)
{% endhint %}
